{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.SharedRef=exports.SharedObject=exports.NativeModule=exports.EventEmitter=void 0;var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var EventEmitter=exports.EventEmitter=function(){function EventEmitter(){(0,_classCallCheck2.default)(this,EventEmitter);}return(0,_createClass2.default)(EventEmitter,[{key:\"addListener\",value:function addListener(eventName,listener){var _this$listeners,_this$listeners3,_this=this;if(!this.listeners){this.listeners=new Map();}if(!((_this$listeners=this.listeners)!=null&&_this$listeners.has(eventName))){var _this$listeners2;(_this$listeners2=this.listeners)==null||_this$listeners2.set(eventName,new Set());}var previousListenerCount=this.listenerCount(eventName);(_this$listeners3=this.listeners)==null||(_this$listeners3=_this$listeners3.get(eventName))==null||_this$listeners3.add(listener);if(previousListenerCount===0&&this.listenerCount(eventName)===1){this.startObserving(eventName);}return{remove:function remove(){_this.removeListener(eventName,listener);}};}},{key:\"removeListener\",value:function removeListener(eventName,listener){var _this$listeners4;var hasRemovedListener=(_this$listeners4=this.listeners)==null||(_this$listeners4=_this$listeners4.get(eventName))==null?void 0:_this$listeners4.delete(listener);if(this.listenerCount(eventName)===0&&hasRemovedListener){this.stopObserving(eventName);}}},{key:\"removeAllListeners\",value:function removeAllListeners(eventName){var _this$listeners5;var previousListenerCount=this.listenerCount(eventName);(_this$listeners5=this.listeners)==null||(_this$listeners5=_this$listeners5.get(eventName))==null||_this$listeners5.clear();if(previousListenerCount>0){this.stopObserving(eventName);}}},{key:\"emit\",value:function emit(eventName){var _this$listeners6;for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}var listeners=new Set((_this$listeners6=this.listeners)==null?void 0:_this$listeners6.get(eventName));listeners.forEach(function(listener){try{listener.apply(void 0,args);}catch(error){console.error(error);}});}},{key:\"listenerCount\",value:function listenerCount(eventName){var _this$listeners$get$s,_this$listeners7;return(_this$listeners$get$s=(_this$listeners7=this.listeners)==null||(_this$listeners7=_this$listeners7.get(eventName))==null?void 0:_this$listeners7.size)!=null?_this$listeners$get$s:0;}},{key:\"startObserving\",value:function startObserving(eventName){}},{key:\"stopObserving\",value:function stopObserving(eventName){}}]);}();var NativeModule=exports.NativeModule=function(_ref){function NativeModule(){(0,_classCallCheck2.default)(this,NativeModule);return _callSuper(this,NativeModule,arguments);}(0,_inherits2.default)(NativeModule,_ref);return(0,_createClass2.default)(NativeModule);}(EventEmitter);var SharedObject=exports.SharedObject=function(_ref2){function SharedObject(){(0,_classCallCheck2.default)(this,SharedObject);return _callSuper(this,SharedObject,arguments);}(0,_inherits2.default)(SharedObject,_ref2);return(0,_createClass2.default)(SharedObject,[{key:\"release\",value:function release(){}}]);}(EventEmitter);var SharedRef=exports.SharedRef=function(_ref3){function SharedRef(){var _this2;(0,_classCallCheck2.default)(this,SharedRef);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_callSuper(this,SharedRef,[].concat(args));_this2.nativeRefType='unknown';return _this2;}(0,_inherits2.default)(SharedRef,_ref3);return(0,_createClass2.default)(SharedRef);}(SharedObject);","map":{"version":3,"names":["EventEmitter","exports","_classCallCheck2","default","_createClass2","key","value","addListener","eventName","listener","_this$listeners","_this$listeners3","_this","listeners","Map","has","_this$listeners2","set","Set","previousListenerCount","listenerCount","get","add","startObserving","remove","removeListener","_this$listeners4","hasRemovedListener","delete","stopObserving","removeAllListeners","_this$listeners5","clear","emit","_this$listeners6","_len","arguments","length","args","Array","_key","forEach","apply","error","console","_this$listeners$get$s","_this$listeners7","size","NativeModule","_ref","_callSuper","_inherits2","SharedObject","_ref2","release","SharedRef","_ref3","_this2","_len2","_key2","concat","nativeRefType"],"sources":["/home/runner/workspace/node_modules/expo-modules-core/src/web/CoreModule.ts"],"sourcesContent":["import {\n  type EventEmitter as EventEmitterType,\n  type EventSubscription,\n  EventsMap,\n} from '../ts-declarations/EventEmitter';\nimport type { NativeModule as NativeModuleType } from '../ts-declarations/NativeModule';\nimport type { SharedObject as SharedObjectType } from '../ts-declarations/SharedObject';\nimport type { SharedRef as SharedRefType } from '../ts-declarations/SharedRef';\n\nexport class EventEmitter<TEventsMap extends EventsMap> implements EventEmitterType {\n  private listeners?: Map<keyof TEventsMap, Set<Function>>;\n\n  addListener<EventName extends keyof TEventsMap>(\n    eventName: EventName,\n    listener: TEventsMap[EventName]\n  ): EventSubscription {\n    if (!this.listeners) {\n      this.listeners = new Map();\n    }\n    if (!this.listeners?.has(eventName)) {\n      this.listeners?.set(eventName, new Set());\n    }\n\n    const previousListenerCount = this.listenerCount(eventName);\n\n    this.listeners?.get(eventName)?.add(listener);\n\n    if (previousListenerCount === 0 && this.listenerCount(eventName) === 1) {\n      this.startObserving(eventName);\n    }\n\n    return {\n      remove: () => {\n        this.removeListener(eventName, listener);\n      },\n    };\n  }\n\n  removeListener<EventName extends keyof TEventsMap>(\n    eventName: EventName,\n    listener: TEventsMap[EventName]\n  ): void {\n    const hasRemovedListener = this.listeners?.get(eventName)?.delete(listener);\n    if (this.listenerCount(eventName) === 0 && hasRemovedListener) {\n      this.stopObserving(eventName);\n    }\n  }\n\n  removeAllListeners<EventName extends keyof TEventsMap>(eventName: EventName): void {\n    const previousListenerCount = this.listenerCount(eventName);\n    this.listeners?.get(eventName)?.clear();\n    if (previousListenerCount > 0) {\n      this.stopObserving(eventName);\n    }\n  }\n\n  emit<EventName extends keyof TEventsMap>(\n    eventName: EventName,\n    ...args: Parameters<TEventsMap[EventName]>\n  ): void {\n    const listeners = new Set(this.listeners?.get(eventName));\n\n    listeners.forEach((listener) => {\n      // When the listener throws an error, don't stop the execution of subsequent listeners and\n      // don't propagate the error to the `emit` function. The motivation behind this is that\n      // errors thrown from a module or user's code shouldn't affect other modules' behavior.\n      try {\n        listener(...args);\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  listenerCount<EventName extends keyof TEventsMap>(eventName: EventName): number {\n    return this.listeners?.get(eventName)?.size ?? 0;\n  }\n\n  startObserving<EventName extends keyof TEventsMap>(eventName: EventName): void {}\n\n  stopObserving<EventName extends keyof TEventsMap>(eventName: EventName): void {}\n}\n\nexport class NativeModule<TEventsMap extends Record<never, never>>\n  extends EventEmitter<TEventsMap>\n  implements NativeModuleType\n{\n  [key: string]: any;\n  ViewPrototypes?: { [viewName: string]: object };\n  __expo_module_name__?: string;\n}\n\nexport class SharedObject<TEventsMap extends Record<never, never>>\n  extends EventEmitter<TEventsMap>\n  implements SharedObjectType\n{\n  release(): void {\n    // no-op on Web, but subclasses can override it if needed.\n  }\n}\n\nexport class SharedRef<\n    TNativeRefType extends string = 'unknown',\n    TEventsMap extends EventsMap = Record<never, never>,\n  >\n  extends SharedObject<TEventsMap>\n  implements SharedRefType<TNativeRefType>\n{\n  nativeRefType: string = 'unknown';\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}