<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spiritual Condition Tracker</title>
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/app/assets/favicon.png">
  
  <!-- Load the CSS -->
  <link rel="stylesheet" href="/app/src/styles/main.css">
  
  <!-- Load React via CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  
  <!-- Load Babel for JSX transformation -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Load the database module first -->
  <script src="/app/database.js"></script>
</head>
<body class="bg-gray-50">
  <div id="app" class="container">
    <!-- React app will be mounted here -->
    <div class="flex justify-center items-center h-screen">
      <div class="text-center">
        <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
        <p class="text-gray-600">Loading Spiritual Condition Tracker...</p>
      </div>
    </div>
  </div>
  
  <!-- Load components directly with Babel transformation -->
  <script type="text/babel" src="/app/src/components/NavBar.js"></script>
  <script type="text/babel" src="/app/src/components/Dashboard.js"></script>
  <script type="text/babel" src="/app/src/components/ActivityLog.js"></script>
  <script type="text/babel" src="/app/src/components/History.js"></script>
  <script type="text/babel" src="/app/src/components/Profile.js"></script>
  <script type="text/babel" src="/app/src/components/NearbyMembers.js"></script>
  <script type="text/babel" src="/app/src/App.js"></script>
  
  <!-- Initialize the React application -->
  <script type="text/babel">
    // Wait for DOM to be ready
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // Initialize the database
        if (window.db) {
          await window.db.init();
        } else {
          console.error('Database not initialized. Make sure database.js is loaded first.');
        }
        
        // Render the React application
        const rootElement = document.getElementById('app');
        const root = ReactDOM.createRoot(rootElement);
        root.render(React.createElement(App));
      } catch (error) {
        console.error('Error initializing app:', error);
      }
    });
  </script>
</body>
</html>